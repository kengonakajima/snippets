# 土砂分類工場全体を裏面と表面の2層構造にする。

現在の問題は、土砂分類工場ゲーム全体が、1つのChipmunk spaceの一つの衝突レイヤーに入っていることによって、土砂の流れが交差できないことです。

交差できないと工場のレイアウトに制限がかかりすぎます。

土砂のフローが交差できるようにするため、工場全体に表面と裏面を用意します。
これはShapezの階に相当します。

- 表の面には、「裏面に送る」パーツ(立体交差パーツ)を置けます。裏面の同じ位置には、「表面から受け入れる」パーツが置かれます。
- 裏の面には、「表の面に送る」パーツを置けます。表の面の同じ位置には、「裏面から受け入れる」パーツが置かれます。

立体交差パーツはOutput/Inputよりも多少小さい大きさの正方形で、
このパーツの中に完全に入ったデブリと水は、もうひとつの面に転送されます。

デブリと水は、それぞれ裏面と表面で同じ動きをします。

デブリに、どちらの面にいるかのフラグを用意します。

画面表示は、fできりかえます。重ねて表示できたらかっこいいけど、
とりあえず最初は、単純に表と裏を切り替えるだけでいいです。
